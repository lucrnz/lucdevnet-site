---
import Icon from "../Icon.astro";
import BlogPostSubtitle from "./BlogPostSubtitle.astro";

export interface Props {
  publishDate: Date;
  title: string;
  coverAlt?: string;
  coverImg?: string;
  readTimeMinutes: number;
}

const { publishDate, title, coverAlt, coverImg, readTimeMinutes } = Astro.props;

const coverImageAvailable =
  coverImg && coverAlt && coverImg.length > 0 && coverAlt.length > 0;
---

<div class="blog-post-header">
  {
    coverImageAvailable && (
      <div class="blog-post-cover">
        <img src={coverImg} alt={coverAlt} />
      </div>
    )
  }

  <h1 class="blog-post-title">{title}</h1>
  <BlogPostSubtitle
    publishDate={publishDate}
    readtimeMinutes={readTimeMinutes}
  />
</div>

<style lang="scss">
  @use "../../styles/common.scss" as *;

  .blog-post-header {
    & > .blog-post-cover {
      height: 300px;
      overflow: hidden;

      & > img {
        object-fit: cover;
      }

      @media (max-width: $mobile-xl-breakpoint) {
        height: 200px;
      }
    }

    & > .blog-post-title {
      margin-top: 10px;
      margin-bottom: 10px;
    }

    & > .blog-post-subtitle {
      display: flex;
      align-items: center;
      flex-direction: row;
      gap: 20px;
      margin-bottom: 20px;

      & > span {
        @include flex-center;
        gap: 8px;
      }

      @media (max-width: $mobile-xl-breakpoint) {
        gap: 10px;
        flex-direction: column;
        align-items: flex-start;
      }
    }
  }
</style>
