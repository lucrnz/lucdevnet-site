---
export interface Props {
  title: string;
  tags: string[];
}

import { X_USERNAME } from "../consts";
import Link from "./Link.astro";

const { title, tags } = Astro.props;

const dataString = JSON.stringify({
  title,
  tags,
  url: Astro.url.toString(),
  username: X_USERNAME
});
---

<form id="x-share">
  <input type="hidden" id="x-share-data" value={dataString} />
  <Link name="Share on X (Twitter)" url="https://x.com/intent/tweet" />
</form>

<style>
  form {
    display: contents;
  }
</style>

<script>
  import { domReady } from "../scripts/domReady";
  import { setupXShare } from "../scripts/shareButtons";

  await domReady();
  setupXShare();
</script>
