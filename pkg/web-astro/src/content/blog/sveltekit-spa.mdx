---
title: "Create an SPA with SvelteKit including Docker"
datePublished: "2024-04-12"
dateModified: "2025-05-02"
summary: "A hands-on on how to create a Single-Page-Application with SvelteKit"
metaDescription: "Learn to create a single-page-application with SvelteKit, TypeScript and deploy it using Docker"
image: "/images/blog/sveltekit-spa/sveltekit-hero.png"
imageAlt: "SvelteKit illustration"
tags: "webdev, typescript, svelte, docker"
---

import { Tweet } from "astro-embed";
import TabContainer from "~/components/Tabs/TabContainer.astro";
import CodeSnippet from "~/components/CodeSnippet.astro";

> üßë‚Äçüíª This article assumes you have intermediate experience with the command line.

Recently, I been working on a side-project, and I decided to build a [single page application](https://en.wikipedia.org/wiki/Single-page_application) for it's UI. So I wanted to share this information with y'all.

Previously, you would use something like [svelte-navigator](https://www.npmjs.com/package/svelte-navigator) or [svelte-spa-router](https://github.com/ItalyPaleAle/svelte-spa-router), In fact, you can still use this tools today!

However, Sveltekit exists for a reason, and that is to have an opinionated way for building web applications with Svelte.

<Tweet id="https://twitter.com/Rich_Harris/status/1376578502833606658" />

<Tweet id="https://twitter.com/Rich_Harris/status/1376590688717045762" />

As Rich Harris said, the [Svelte framework](https://en.wikipedia.org/wiki/Svelte) creator, other solutions might have their flaws.

I won't list the reasons [why server-side rendering is better](https://www.phind.com/search?q=Why+should+I+avoid+building+a+single-page-application+and+prefer+a+solution+with+server-side+rendering+instead%3F&ignoreSearchResults=false&allowMultiSearch=false) or [when should you build an SPA instead](https://www.phind.com/search?q=When+should+I+prefer+building+a+single-page-application+instead+of+running+a+server+that+provides+SSR.++What+are+it%27s+benefits%3F&ignoreSearchResults=false&allowMultiSearch=false). Every choice has it's pros and cons.

## Getting started

Let's create a new project

<TabContainer tabs={["npm", "pnpm"]}>
<CodeSnippet language="sh" slot="tab-1">
```sh
npx sv create my-app
```
</CodeSnippet>
<CodeSnippet language="sh" slot="tab-2">
```sh
pnpm dlx sv create my-app
```
</CodeSnippet>
</TabContainer>

The program will make you some questions, I will choosing the option that says "SvelteKit demo app", and I will choose to use TypeScript.

I will skip any of the aditional options.

<CodeSnippet language="misc" name="Console Output">
```
‚îå  Welcome to SvelteKit!
‚îÇ
‚óá  Which Svelte app template?
‚îÇ  SvelteKit demo app
‚îÇ
‚óá  Add type checking with TypeScript?
‚îÇ  Yes, using TypeScript syntax
‚îÇ
‚óá  Select additional options (use arrow keys/space bar)
‚îÇ  none
‚îÇ
‚îî  Your project is ready!
```
</CodeSnippet>

Open your favorite code editor with that folder. I will be using [VS Code](https://code.visualstudio.com/).

Don't forget to install the packages.

<TabContainer tabs={["npm", "pnpm"]}>
<CodeSnippet language="sh" slot="tab-1">
```sh
npm i
```
</CodeSnippet>
<CodeSnippet language="sh" slot="tab-2">
```sh
pnpm i
```
</CodeSnippet>
</TabContainer>

## How to enable SPA mode

You can also consult the official documentation [in this link](https://kit.svelte.dev/docs/single-page-apps)

Lets create the following file `src/routes/+layout.ts`

<CodeSnippet language="sh">
```sh
touch src/routes/+layout.ts
```
</CodeSnippet>

Add the following contents:

<CodeSnippet language="ts" name="src/routes/+layout.ts">
```ts
export const ssr = false;
```
</CodeSnippet>

> ‚ö† Do not confuse this file with `+layout.svelte` they're different files, and only in the `.ts` this will work.

Now we have to switch the adapter, to use the static one.

<TabContainer tabs={["npm", "pnpm"]}>
<CodeSnippet language="sh" slot="tab-1">
```sh
npm remove @sveltejs/adapter-auto
npm i -D @sveltejs/adapter-static
```
</CodeSnippet>
<CodeSnippet language="sh" slot="tab-2">
```sh
pnpm remove @sveltejs/adapter-auto
pnpm add -D @sveltejs/adapter-static
```
</CodeSnippet>
</TabContainer>

Open the file that contains the svelte config `svelte.config.js`

Replace the adapter to use the static one, here is how it should look like:

<CodeSnippet language="js" name="svelte.config.js">
```js
import adapter from '@sveltejs/adapter-static';
import { vitePreprocess } from '@sveltejs/vite-plugin-svelte';

/** @type {import('@sveltejs/kit').Config} */
const config = {
	// Consult https://kit.svelte.dev/docs/integrations#preprocessors
	// for more information about preprocessors
	preprocess: vitePreprocess(),

	kit: {
		adapter: adapter({
			fallback: 'index.html' // may differ from host to host
		})
	}
};

export default config;
```
</CodeSnippet>

This should be enough to turn it into an SPA.

You can run the application if you want to play around with it.

<TabContainer tabs={["npm", "pnpm"]}>
<CodeSnippet language="sh" slot="tab-1">
```sh
npm run dev
```
</CodeSnippet>
<CodeSnippet language="sh" slot="tab-2">
```sh
pnpm run dev
```
</CodeSnippet>
</TabContainer>

## How to dockerize any Single-page-application

> TL;DR: Run any http server that allows rewrites and redirect everything to "index.html".

Let's do that! For that, I will using nginx.

‚úç Create a file called `nginx.conf`

<CodeSnippet language="cfg" name="nginx.conf">
```
events {}

http {
    default_type application/octet-stream;
    include /etc/nginx/mime.types;

    server {
        listen 3000;
        root /usr/share/nginx/html;

        
        gzip on;
        gzip_types text/html application/javascript application/json text/css;

        location / {
            try_files $uri $uri/ $uri.html /index.html;
        }

        location ~* \.(?:css|js|svg|jpg|png|webp|mp4|m4a|webm|ogg|opus)$ {
            expires 30d;
            add_header Cache-Control "public";
        }

        location ~* \.(?:json)$ {
            expires 1d;
            add_header Cache-Control "public";
        }
    }
}
```
</CodeSnippet>

You can tune in this config if you want to, here you can see that it gives a long time cache for any static request.

Create a file called `.dockerignore`

<CodeSnippet language="sh">
```sh
touch .dockerignore
```
</CodeSnippet>

Add the following contents:

<CodeSnippet language="misc" name=".dockerignore">
```
.git
.gitignore
.svelte-kit
dist
build
Dockerfile*
node_modules
*.md
.env*
```
</CodeSnippet>

Create a file called `Dockerfile`
<CodeSnippet language="sh">
```sh
touch Dockerfile
```
</CodeSnippet>

As expected, the contents vary depending on the package manager you are using.

<TabContainer tabs={["npm", "pnpm"]}>
<CodeSnippet language="dockerfile" slot="tab-1">
```dockerfile
FROM node:lts AS builder
WORKDIR /app

COPY . .

RUN npm ci
RUN npm run build

FROM nginx:latest as runner

COPY --from=builder /app/build /usr/share/nginx/html
COPY nginx.conf /etc/nginx/nginx.conf
```
</CodeSnippet>
<CodeSnippet language="dockerfile" slot="tab-2">
```dockerfile
FROM node:lts AS builder
WORKDIR /app
ENV PNPM_HOME="/pnpm"
ENV PATH="$PNPM_HOME:$PATH"
RUN corepack enable && corepack prepare pnpm@latest-9 --activate

COPY . .

RUN pnpm install
RUN pnpm run build

FROM nginx:latest as runner

COPY --from=builder /app/build /usr/share/nginx/html
COPY nginx.conf /etc/nginx/nginx.conf
```
</CodeSnippet>
</TabContainer>

Let's build the docker image:

<CodeSnippet language="sh">
```sh
docker build -t my-app .
```
</CodeSnippet>

Run the container with the following command:

<CodeSnippet language="sh">
```sh
docker run -p 3000:3000 -t my-app
```
</CodeSnippet>

This will forward the port "3000" from the container to match :3000 on your local computer.

üß† Learn more about [docker run](https://docs.docker.com/reference/cli/docker/container/run/)

That should be all!

üëã Happy coding!

**Updated:** Thank you! anurag for poiting out the incorrect Dockerignore entry.